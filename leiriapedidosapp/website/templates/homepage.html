{% extends 'base.html' %}

{% block content %}

{% if user.is_authenticated %}
  <h1 class="text-center">Produtos</h1>

  <ul class="nav justify-content-end">
    <a href="{% url 'add-produto' %}" class="btn btn-secondary" role="button">Adicionar Produto</a>
    <a href="#" class="btn btn-secondary" role="button" >Link</a>
  </ul>
  
  <table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Nome</th>
      <th scope="col">Unidade de Medida</th>
      <th scope="col">Preço</th>
      <th scope="col">Observações</th>
    </tr>
  </thead>
  <tbody>
  {% if produtos %}
    {% for produto in produtos %}
      <tr>
        <td><a href="{% url 'produto' produto.id %}">{{ produto.id }}</a></td>
        <td>{{ produto.nome }}</td>
        <td>{{ produto.medido_por }}</td>
        <td>R${{ produto.preco }}</td>
        <td>{{ produto.observacoes }}</td>
      </tr><br/>
    {% endfor %}
  {% endif %}

{% else %}
  <h1 class="text-center">LeiriaPedidosApp</h1>
  <h2 class="text-center">Login</h2>
  <br/>
  <form method="POST" action="{% url 'homepage' %}">
    {% csrf_token %} <!--Token que garante que as requisições estão sendo feitas pelo usuário autenticado-->
    <div class="mb-3">
      <input type="text" class="form-control" name="username", placeholder="Nome de Usuário" required>
    </div>
    <div class="mb-3">
      <input type="password" class="form-control" name="password", placeholder="Senha" required>
    </div>
    <button type="submit" class="btn btn-secondary">Entrar</button>
  </form>

{% endif %}

{% endblock %}